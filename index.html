<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mis Panoramas</title>
  <!-- Enlace correcto a Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
  <style>
    body{
    font-family: 'Cinzel Decorative', serif;
    background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: black;
    text-shadow: 0 1px 4px rgba(255,255,255,0.7);
    margin: 0;
    padding: 0;
    text-align: center;
    }
  </style>
</head>

    }
    p.subtitle { margin: 4px 0 0; color: var(--muted); font-size: 14px; }

    .controls {
      padding: 12px 24px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }
    .input, .btn {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(20,60,70,0.08);
      background: rgba(255,255,255,0.9);
    }
    .input { min-width: 260px; flex: 1; }
    .btn { cursor: pointer; background: linear-gradient(90deg,var(--sea),#fff); border: none; }

    main { padding: 18px 24px 80px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(320px,1fr)); gap: 18px; }
    .card {
      background: var(--card);
      border-radius: 14px;
      padding: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.06);
      transition: transform .18s ease, box-shadow .18s ease;
      position: relative;
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 18px 40px rgba(0,0,0,0.08);
    }
    .meta { display: flex; align-items: center; gap: 10px; margin-top: 8px; }
    .meta .title { font-weight: 600; color: #133642; }
    .meta .note { color: var(--muted); font-size: 13px; }
    .small-note { margin-top: 8px; font-size: 14px; color: #354b52; }
    .delete-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      padding: 4px 8px;
      font-size: 12px;
    }

    .empty { padding: 48px; text-align: center; color: var(--muted); }

    footer { position: fixed; right: 18px; bottom: 18px; }
    .fab {
      background: var(--accent);
      color: white;
      padding: 12px 16px;
      border-radius: 999px;
      box-shadow: 0 10px 24px rgba(255,123,107,0.18);
      border: none;
      cursor: pointer;
    }

    blockquote.instagram-media { width: 100% !important; }

    @media (max-width:420px){ h1{font-size:22px}.logo{width:48px;height:48px} }
  </style>
</head>
<body>
  <header>
    <div class="logo" aria-hidden>
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 13c0 4 4 7 8 7s8-3 8-7c0-6-8-11-8-11S4 7 4 13z" fill="#ffb19a"/><circle cx="12" cy="13" r="2.2" fill="#1e6b78"/></svg>
    </div>
    <div>
      <h1>Eventos por asistir</h1>
      <p class="subtitle">Un diario visual para nuestros panoramasðŸŒ´âœ¨.</p>
    </div>
  </header>

  <section class="controls">
    <input id="igUrl" class="input" placeholder="Pega el link de una publicaciÃ³n de Instagram">
    <input id="titleInput" class="input" placeholder="TÃ­tulo corto (ej. Festival de verano)">
    <button id="addBtn" class="btn">Agregar</button>
  </section>

  <main>
    <div id="grid" class="grid"></div>
    <div id="empty" class="empty">Pega un enlace de Instagram arriba y presiona "Agregar" para empezar.</div>
  </main>

  <footer>
    <button class="fab" id="themeBtn">Cambiar vibra</button>
  </footer>

  <script async defer src="https://www.instagram.com/embed.js"></script>
  <script>
    const grid = document.getElementById('grid');
    const empty = document.getElementById('empty');

    // Guardar y cargar desde localStorage
    function savePosts() {
      const cards = [...grid.children].map(card => ({
        permalink: card.dataset.permalink,
        title: card.querySelector('.title').textContent,
        note: card.querySelector('.small-note').innerText
      }));
      localStorage.setItem('eventosGuardados', JSON.stringify(cards));
    }

    function loadPosts() {
      const saved = JSON.parse(localStorage.getItem('eventosGuardados') || '[]');
      saved.forEach(post => addPost(post.permalink, post.title, post.note));
    }

    function createCard(permalink, title = '', note = '') {
      const card = document.createElement('article');
      card.className = 'card';
      card.dataset.permalink = permalink;

      const delBtn = document.createElement('button');
      delBtn.textContent = 'Eliminar';
      delBtn.className = 'delete-btn';
      delBtn.onclick = () => { card.remove(); savePosts(); updateEmptyState(); };

      const block = document.createElement('blockquote');
      block.className = 'instagram-media';
      block.setAttribute('data-instgrm-permalink', permalink);
      block.setAttribute('data-instgrm-version', '14');
      block.style.margin = '0';

      const meta = document.createElement('div');
      meta.className = 'meta';

      const titleEl = document.createElement('div');
      titleEl.className = 'title';
      titleEl.textContent = title || 'Evento por asistir';

      const noteEl = document.createElement('div');
      noteEl.className = 'note';
      noteEl.textContent = '';

      meta.appendChild(titleEl);
      meta.appendChild(noteEl);

      const smallNote = document.createElement('div');
      smallNote.className = 'small-note';
      smallNote.contentEditable = true;
      smallNote.innerText = note || 'Haz doble clic aquÃ­ para escribir una nota personal...';
      smallNote.addEventListener('input', savePosts);

      card.append(delBtn, block, meta, smallNote);
      return card;
    }

    function addPost(permalink, title = '', note = '') {
      const card = createCard(permalink, title, note);
      grid.prepend(card);
      setTimeout(() => {
        if (window.instgrm && window.instgrm.Embeds && typeof window.instgrm.Embeds.process === 'function') {
          window.instgrm.Embeds.process();
        }
      }, 300);
      updateEmptyState();
      savePosts();
    }

    function updateEmptyState() {
      empty.style.display = grid.children.length === 0 ? 'block' : 'none';
    }

    document.getElementById('addBtn').addEventListener('click', () => {
      const url = document.getElementById('igUrl').value.trim();
      const title = document.getElementById('titleInput').value.trim();
      if (!url) { alert('Pega la URL de la publicaciÃ³n de Instagram.'); return; }
      addPost(url, title);
      document.getElementById('igUrl').value = '';
      document.getElementById('titleInput').value = '';
    });

    // Cambiar vibra (colores)
    const themeBtn = document.getElementById('themeBtn');
    let alt = false;
    themeBtn.addEventListener('click', () => {
      alt = !alt;
      if (alt) {
        document.documentElement.style.setProperty('--sand', '#fff8f0');
        document.documentElement.style.setProperty('--sea', '#d7f3ef');
        document.documentElement.style.setProperty('--accent', '#4aa6b4');
      } else {
        document.documentElement.style.setProperty('--sand', '#f6efe6');
        document.documentElement.style.setProperty('--sea', '#bfeaf5');
        document.documentElement.style.setProperty('--accent', '#ff7b6b');
      }
    });

    // Permitir pegar directamente una URL de Instagram
    window.addEventListener('paste', e => {
      const text = (e.clipboardData || window.clipboardData).getData('text');
      if (text.includes('instagram.com/p/')) document.getElementById('igUrl').value = text;
    });

    loadPosts();
  </script>
</body>
</html>










